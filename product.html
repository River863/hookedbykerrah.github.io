<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Product ‚Ä¢ HookedByKerrah</title>
  <style>
    :root{
      --bg:#fff3f6; --bg2:#fff8fb; --card:#fff; --text:#2a2a2a;
      --muted:#6f6f6f; --accent:#e6a6b3; --accent-hover:#d98c9a;
      --border:rgba(0,0,0,.08); --shadow:0 12px 30px rgba(0,0,0,.08);
      --radius:18px; --max:980px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:radial-gradient(1200px 600px at 20% 0%,var(--bg2),var(--bg));color:var(--text)}
    .wrap{max-width:var(--max);margin:0 auto;padding:20px}
    .topbar{display:flex;justify-content:space-between;align-items:center;padding:14px;background:rgba(255,255,255,.9);border-radius:var(--radius);border:1px solid var(--border);box-shadow:var(--shadow)}
    a.back{font-weight:900;color:var(--text);text-decoration:none;padding:8px 12px;border-radius:12px;border:1px solid var(--border);background:#fff}
    .card{margin-top:16px;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);border:1px solid var(--border);overflow:hidden}
    .grid{display:grid;grid-template-columns:1fr 1fr}
    .imgWrap{background:#111;min-height:320px;display:flex;align-items:center;justify-content:center;cursor:zoom-in}
    .imgWrap img{width:100%;height:100%;object-fit:contain;background:#111;display:block}
    .info{padding:16px}
    h1{margin:0 0 6px;font-size:24px}
    .desc{color:var(--muted);margin-bottom:10px}
    .price{font-weight:950;font-size:18px;margin-bottom:6px}
    .hint{font-size:12px;color:var(--muted);margin-bottom:10px}
    label{display:block;font-weight:900;margin:10px 0 6px}
    select,textarea,input{width:100%;padding:10px;border-radius:12px;border:1px solid var(--border);font-weight:700}
    textarea{min-height:80px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .btn{width:100%;margin-top:12px;padding:12px;border-radius:14px;border:none;font-weight:950;cursor:pointer;background:var(--accent);color:#fff}
    .btn.black{background:#111}
    .noteBox{margin-top:12px;font-size:13px;color:var(--muted)}
    @media(max-width:820px){.grid{grid-template-columns:1fr}.row{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <a class="back" href="index.html">‚Üê Back to Home</a>
      <strong>HookedByKerrah ‚ú®</strong>
    </div>

    <div class="card">
      <div class="grid">
        <div class="imgWrap" id="imgWrap"><img id="prodImg" alt=""></div>
        <div class="info">
          <h1 id="prodName">Product</h1>
          <p class="desc" id="prodDesc"></p>
          <div class="price" id="prodPrice"></div>
          <div class="hint" id="priceHint"></div>

          <!-- Options -->
          <div class="row">
            <div>
              <label for="size">Size</label>
              <select id="size"></select>
            </div>
            <div>
              <label for="material">Material</label>
              <select id="material"></select>
            </div>
          </div>

          <!-- Add-on (used by Santa Hats + Cardigan) -->
          <div id="addonWrap" style="display:none;margin-top:10px">
            <label id="addonLabel" for="addon">Add-on</label>
            <select id="addon"></select>
          </div>

          <!-- Scrunchies color selectors / trim (only shown for scrunchies) -->
          <div id="scrunchOptions" style="display:none;margin-top:10px">
            <label>Main color (pick 2 colors)</label>
            <div class="row">
              <div>
                <label for="color1" style="margin-top:0">Main color 1</label>
                <select id="color1"></select>
              </div>
              <div>
                <label for="color2" style="margin-top:0">Main color 2</label>
                <select id="color2"></select>
              </div>
            </div>

            <label style="margin-top:8px">Trim color (optional)</label>
            <select id="trim"></select>
            <div class="hint" style="margin-top:6px">Trim adds $0.25 (regular) or $0.50 (glitter).</div>
          </div>

          <!-- Measurement area for crop top -->
          <div id="measurementArea" style="display:none;margin-top:10px">
            <label>Measurements</label>
            <p class="hint">Enter measurements (optional). Price may adjust slightly based on sizing.</p>

            <div style="margin-top:6px">
              <label for="mBust">Bust (in inches)</label>
              <input id="mBust" type="number" min="0" placeholder="e.g. 34">
            </div>
            <div style="margin-top:6px">
              <label for="mShoulder">Over-shoulder circumference</label>
              <input id="mShoulder" type="number" min="0" placeholder="e.g. 36">
            </div>
            <div style="margin-top:6px">
              <label for="mLength">Top length (in inches)</label>
              <input id="mLength" type="number" min="0" placeholder="e.g. 10">
            </div>
            <div class="hint" style="margin-top:8px">If you don‚Äôt enter measurements, it stays at the base price.</div>
          </div>

          <label for="notes">Notes (optional)</label>
          <textarea id="notes" placeholder="Color requests, fit notes, glitter yes/no, etc."></textarea>

          <button class="btn" id="paypalBtn">Click here to buy via PayPal</button>
          <button class="btn black" id="appleBtn">Apple Pay coming soon</button>

          <div class="noteBox" id="finalNote">
            All items are handmade & made to order. All sales final.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lightbox (simple) -->
  <div id="lightbox" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.82);align-items:center;justify-content:center;z-index:60;">
    <div style="width:min(1000px,98%);background:#fff;border-radius:16px;overflow:hidden;">
      <div style="padding:10px;text-align:right;"><button id="lbClose" style="padding:6px 10px;border-radius:10px;border:1px solid rgba(0,0,0,.08);background:#fff;cursor:pointer">Close ‚úï</button></div>
      <img id="lbImg" src="" style="width:100%;height:auto;display:block;background:#111" alt="">
    </div>
  </div>

<script>
/* =========================
   PayPal links placeholders
========================= */
const PAYPAL_LINKS = {
  "santa:adult_regular": "PAYPAL_SANTA_ADULT_REGULAR",
  "santa:adult_glitter": "PAYPAL_SANTA_ADULT_GLITTER",
  "santa:kids_regular": "PAYPAL_SANTA_KIDS_REGULAR",
  "santa:kids_glitter": "PAYPAL_SANTA_KIDS_GLITTER",

  "scrunch:single_acrylic": "PAYPAL_SCRUNCH_SINGLE_ACRYLIC",
  "scrunch:single_cotton": "PAYPAL_SCRUNCH_SINGLE_COTTON",
  "scrunch:single_plush": "PAYPAL_SCRUNCH_SINGLE_PLUSH",
  "scrunch:3_acrylic": "PAYPAL_SCRUNCH_3_ACRYLIC",
  "scrunch:3_cotton": "PAYPAL_SCRUNCH_3_COTTON",
  "scrunch:3_plush": "PAYPAL_SCRUNCH_3_PLUSH",

  "pillow:acrylic": "PAYPAL_PILLOW_ACRYLIC",
  "pillow:cotton": "PAYPAL_PILLOW_COTTON",
  "pillow:plush": "PAYPAL_PILLOW_PLUSH",

  "tote:default": "PAYPAL_TOTE_DEFAULT",

  "cardigan:sm_med_crop": "PAYPAL_CARDIGAN_SM_MED_CROP",
  "cardigan:sm_med_butt": "PAYPAL_CARDIGAN_SM_MED_BUTT",
  "cardigan:sm_med_mid": "PAYPAL_CARDIGAN_SM_MED_MID",
  "cardigan:sm_med_duster": "PAYPAL_CARDIGAN_SM_MED_DUSTER",
  "cardigan:med_lg_crop": "PAYPAL_CARDIGAN_MED_LG_CROP",
  "cardigan:med_lg_butt": "PAYPAL_CARDIGAN_MED_LG_BUTT",
  "cardigan:med_lg_mid": "PAYPAL_CARDIGAN_MED_LG_MID",
  "cardigan:med_lg_duster": "PAYPAL_CARDIGAN_MED_LG_DUSTER",
  "cardigan:lg_xl_crop": "PAYPAL_CARDIGAN_LG_XL_CROP",
  "cardigan:lg_xl_butt": "PAYPAL_CARDIGAN_LG_XL_BUTT",
  "cardigan:lg_xl_mid": "PAYPAL_CARDIGAN_LG_XL_MID",
  "cardigan:lg_xl_duster": "PAYPAL_CARDIGAN_LG_XL_DUSTER",

  "croptop:limited_fixed": "PAYPAL_CROPTOP_LIMITED",
  "croptop:custom": "PAYPAL_CROPTOP_CUSTOM"
};

/* =========================
   Product definitions + pricing rules
========================= */
const PRODUCTS = {
  santahats: {
    name:"Santa Hats",
    img:"images/SantaHats.jpeg",
    desc:"Adult & kids sizes. Glitter option available.",
    sizes:["Kids","Adult"],
    materials:["Standard"],
    addon: {
      label: "Glitter",
      options: [
        { label: "No glitter", value: "none" },
        { label: "Glitter", value: "glitter" }
      ]
    },
    pricing: sel => {
      const isAdult = sel.size==="Adult";
      const isGlitter = sel.addon==="glitter";
      let price = isAdult ? 35 : 30;
      if (isGlitter) price += 5;
      const key = (isAdult ? "santa:adult_" : "santa:kids_") + (isGlitter ? "glitter" : "regular");
      return {price, key, hint: isGlitter ? "Glitter adds $5." : ""};
    }
  },

  scrunchies: {
    name:"Scrunchies",
    img:"images/IMG_4189.jpg",
    desc:"Sold single or as a 3-pack. Choose material and colors.",
    sizes:["Single","3-Pack","3-Valentine"],
    materials:["Acrylic","Cotton","Plush"],
    pricing: sel => {
      const mat = sel.material || "Acrylic";

      // base pricing
      let baseSingle = mat==="Acrylic" ? 10 : mat==="Cotton" ? 12 : 12;
      if(mat==="Plush") baseSingle = 12;

      let price = baseSingle;
      let key = `scrunch:single_${mat.toLowerCase()}`;
      let hint = "Single scrunchie";

      if(sel.size==="3-Pack") {
        price = mat==="Acrylic" ? 27 : mat==="Cotton" ? 32 : 33;
        key = `scrunch:3_${mat.toLowerCase()}`;
        hint = "3-pack pricing";
      } else if(sel.size==="3-Valentine") {
        price = mat==="Acrylic" ? 30 : mat==="Cotton" ? 34 : 36;
        key = `scrunch:3_${mat.toLowerCase()}`;
        hint = "Valentine 3-pack special";
      }

      // trim fee
      const t = (sel.trim || "No trim").toLowerCase();
      let trimFee = 0;
      if(t !== "no trim"){
        trimFee = t.startsWith("glitter") ? 0.50 : 0.25;
      }
      price = price + trimFee;

      const trimHint = trimFee ? ` Trim +$${trimFee.toFixed(2)}.` : "";
      return {price, key, hint: hint + trimHint};
    }
  },

  croptop: {
    name:"Ribbed Lace Drawstring Crop Top (Limited)",
    img:"images/IMG_4188.jpg",
    desc:"Limited ribbed lace drawstring crop top. One-of-a-kind drops ‚Äî fits S‚ÄìM best and adjustable.",
    sizes:["Adjustable (fits S‚ÄìM)"],
    materials:["As pictured"],
    pricing: sel => {
      // base
      let price = 95;
      let hint = "Limited item ‚Äî base price.";

      // OPTIONAL measurement-based adjustment (small)
      const m = sel.measurements || {bust:0, shoulder:0, length:0};
      const bustBase = 34, shoulderBase = 36, lengthBase = 10;

      const bustAdd = Math.max(0, (m.bust || 0) - bustBase) * 1.0;
      const shoulderAdd = Math.max(0, (m.shoulder || 0) - shoulderBase) * 0.5;
      const lengthAdd = Math.max(0, (m.length || 0) - lengthBase) * 1.0;

      const add = Math.ceil(bustAdd + shoulderAdd + lengthAdd);
      if(add > 0){
        price += add;
        hint = `Measurements add +$${add} (small sizing adjustment).`;
        return {price, key:"croptop:custom", hint};
      }

      return {price, key:"croptop:limited_fixed", hint};
    }
  },

  pillow: {
    name:"Pillow Cover (cover only)",
    img:"images/BlueHexagonCardigan.png",
    desc:"Cozy pillow covers ‚Äî cover only. Choose material and color.",
    sizes:["Standard"],
    materials:["Acrylic","Cotton","Plush"],
    pricing: sel => {
      const mat = sel.material || "Acrylic";
      const price = mat==="Acrylic" ? 35 : mat==="Cotton" ? 45 : 55;
      const key = mat==="Acrylic" ? "pillow:acrylic" : mat==="Cotton" ? "pillow:cotton" : "pillow:plush";
      return {price, key, hint:"Cover only (insert not included)."};
    }
  },

  tote: {
    name:"Crochet Tote Bag",
    img:"images/IMG_4125.jpg",
    desc:"Sturdy and stylish tote bag.",
    sizes:["One size"],
    materials:["As pictured"],
    pricing: sel => ({price:45, key:"tote:default", hint:"Fixed price."})
  },

  cardigan: {
    name:"Hexagon Cardigan",
    img:"images/BlueHexagonCardigan.png",
    desc:"Made-to-order hexagon cardigan ‚Äî pick material, size range and length.",
    sizes:["S‚ÄìM","M‚ÄìL","L‚ÄìXL"],
    materials:["Acrylic","Cotton"],
    addon: {
      label: "Length",
      options: [
        { label: "Crop (waist)", value: "crop" },
        { label: "Butt-length", value: "butt" },
        { label: "Mid-thigh", value: "mid" },
        { label: "Duster", value: "duster" }
      ]
    },
    pricing: sel => {
      const sizeKey = sel.size || "S‚ÄìM";
      const mat = sel.material || "Acrylic";

      let base = 120;
      if(sizeKey==="S‚ÄìM") base = mat==="Acrylic" ? 120 : 140;
      if(sizeKey==="M‚ÄìL") base = mat==="Acrylic" ? 135 : 155;
      if(sizeKey==="L‚ÄìXL") base = mat==="Acrylic" ? 150 : 170;

      const length = sel.addon || "crop";
      let add = 0;
      if(length==="butt") add = 15;
      if(length==="mid") add = 30;
      if(length==="duster") add = 50;

      const price = base + add;

      const sizeSlug =
        sizeKey==="S‚ÄìM" ? "sm_med" :
        sizeKey==="M‚ÄìL" ? "med_lg" :
        "lg_xl";

      const key = `cardigan:${sizeSlug}_${length}`;
      return {price, key, hint:"Choose size range and length."};
    }
  }
};

/* -------------------------
   UI wiring
------------------------- */
const id = new URLSearchParams(window.location.search).get("id");
const item = id ? PRODUCTS[id] : null;

const prodName = document.getElementById("prodName");
const prodDesc = document.getElementById("prodDesc");
const prodImg = document.getElementById("prodImg");
const prodPrice = document.getElementById("prodPrice");
const priceHint = document.getElementById("priceHint");

const sizeSel = document.getElementById("size");
const materialSel = document.getElementById("material");

const addonWrap = document.getElementById("addonWrap");
const addonLabel = document.getElementById("addonLabel");
const addonSel = document.getElementById("addon");

const notesEl = document.getElementById("notes");
const paypalBtn = document.getElementById("paypalBtn");
const appleBtn = document.getElementById("appleBtn");

const scrunchOptions = document.getElementById("scrunchOptions");
const color1 = document.getElementById("color1");
const color2 = document.getElementById("color2");
const trim = document.getElementById("trim");

const measurementArea = document.getElementById("measurementArea");
const mBust = document.getElementById("mBust");
const mShoulder = document.getElementById("mShoulder");
const mLength = document.getElementById("mLength");

/* helpers */
function money(n){ return `$${Number(n).toFixed(0)}`; }

function fillSimple(select, arr){
  select.innerHTML = arr.map(a=>`<option>${a}</option>`).join("");
}

function fillValueLabel(select, arr){
  // arr: [{label, value}]
  select.innerHTML = arr.map(o=>`<option value="${o.value}">${o.label}</option>`).join("");
}

function buildOrderSummary(sel, out){
  const lines = [];
  lines.push(`Product: ${item.name}`);
  lines.push(`Displayed price: ${money(out.price)}`);
  lines.push(`Size: ${sel.size}`);
  lines.push(`Material: ${sel.material}`);

  if(item.addon){
    const opt = item.addon.options.find(o => o.value === sel.addon);
    lines.push(`${item.addon.label}: ${opt ? opt.label : sel.addon}`);
  }

  if(id==="scrunchies"){
    lines.push(`Main colors: ${sel.color1} + ${sel.color2}`);
    lines.push(`Trim: ${sel.trim}`);
  }

  if(id==="croptop"){
    lines.push(`Measurements: bust ${sel.measurements.bust}" / shoulder ${sel.measurements.shoulder}" / length ${sel.measurements.length}"`);
  }

  const notes = (notesEl.value || "").trim();
  if(notes) lines.push(`Notes: ${notes}`);

  lines.push(`Pay tier key: ${out.key}`);
  return lines.join("\n");
}

/* render */
if(!item){
  prodName.textContent = "Product not found";
  prodDesc.textContent = "Go back and choose an item from the home page.";
  prodPrice.textContent = "";
  paypalBtn.disabled = true;
} else {
  document.title = `${item.name} ‚Ä¢ HookedByKerrah`;
  prodName.textContent = item.name;
  prodDesc.textContent = item.desc;
  prodImg.src = item.img;
  prodImg.alt = item.name;

  fillSimple(sizeSel, item.sizes || ["One size"]);
  fillSimple(materialSel, item.materials || ["As pictured"]);

  // Add-on dropdown (Santa Hats + Cardigan)
  if(item.addon){
    addonWrap.style.display = "block";
    addonLabel.textContent = item.addon.label;
    fillValueLabel(addonSel, item.addon.options);
  } else {
    addonWrap.style.display = "none";
  }

  // scrunchies-only options
  if(id==="scrunchies"){
    scrunchOptions.style.display = "block";
    const baseColors = ["Multicolor","Pink","Red","Green","Blue","White","Orange","Yellow"];
    fillSimple(color1, baseColors);
    fillSimple(color2, baseColors);
    fillSimple(trim, ["No trim","Pink","Red","Green","Blue","White","Orange","Yellow","Black","Glitter (red)","Glitter (white)","Glitter (silver)","Glitter (pink)"]);
  } else {
    scrunchOptions.style.display = "none";
  }

  // measurement area only for croptop
  if(id==="croptop"){
    measurementArea.style.display = "block";
  } else {
    measurementArea.style.display = "none";
  }

  function update(){
    const sel = {
      size: sizeSel.value,
      material: materialSel.value,
      addon: (addonWrap.style.display !== "none") ? addonSel.value : null,
      color1: (id==="scrunchies") ? color1.value : null,
      color2: (id==="scrunchies") ? color2.value : null,
      trim: (id==="scrunchies") ? trim.value : "No trim"
    };

    if(id==="croptop"){
      sel.measurements = {
        bust: Number(mBust.value||0),
        shoulder: Number(mShoulder.value||0),
        length: Number(mLength.value||0)
      };
    }

    const out = item.pricing(sel);
    prodPrice.textContent = money(out.price);
    priceHint.textContent = out.hint || "";

    // helpful: store latest summary on button dataset for quick access in PayPal click
    paypalBtn.dataset.orderSummary = buildOrderSummary(sel, out);
    paypalBtn.dataset.payKey = out.key;
  }

  sizeSel.addEventListener("change", update);
  materialSel.addEventListener("change", update);
  addonSel.addEventListener("change", update);

  if(color1) color1.addEventListener("change", update);
  if(color2) color2.addEventListener("change", update);
  if(trim) trim.addEventListener("change", update);

  if(mBust) mBust.addEventListener("input", update);
  if(mShoulder) mShoulder.addEventListener("input", update);
  if(mLength) mLength.addEventListener("input", update);

  update();
}

/* lightbox */
const imgWrap = document.getElementById("imgWrap");
const lightbox = document.getElementById("lightbox");
const lbImg = document.getElementById("lbImg");
const lbClose = document.getElementById("lbClose");
if(imgWrap) imgWrap.addEventListener("click", ()=> {
  lbImg.src = (item && item.img) ? item.img : "";
  lightbox.style.display = "flex";
});
if(lbClose) lbClose.addEventListener("click", ()=> { lightbox.style.display = "none"; lbImg.src = ""; });
if(lightbox) lightbox.addEventListener("click", (e)=> { if(e.target===lightbox){ lightbox.style.display="none"; lbImg.src=""; } });

/* payment button behavior */
paypalBtn.addEventListener("click", ()=>{
  if(!item){ alert("No product selected."); return; }

  const payKey = paypalBtn.dataset.payKey;
  const payLink = PAYPAL_LINKS[payKey];

  if(!payLink || payLink.startsWith("PAYPAL_")){
    alert(
      "PayPal link for this option isn't set yet.\n\n" +
      paypalBtn.dataset.orderSummary + "\n\n" +
      "Open product.html and replace PAYPAL_LINKS[\"" + payKey + "\"] with your real PayPal payment link."
    );
    return;
  }

  // Open PayPal
  window.open(payLink, "_blank", "noopener");

  // Optional: also copy the order summary to clipboard if supported (helps you + customer)
  if(navigator.clipboard){
    navigator.clipboard.writeText(paypalBtn.dataset.orderSummary).catch(()=>{});
  }
});

appleBtn.addEventListener("click", ()=> {
  alert("Apple Pay coming soon after domain is connected üçé");
});
</script>
</body>
</html>
