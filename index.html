<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HookedByKerrah</title>

  <meta name="description" content="HookedByKerrah â€” handmade crochet pieces made to order. Shop hats, totes, cardigans, scrunchies, and home decor." />

  <style>
    :root{
      --bg:#fff3f6;
      --card:#ffffff;
      --text:#2a2a2a;
      --muted:#6f6f6f;
      --accent:#e6a6b3;
      --accent-hover:#d98c9a;
      --tab-bg:#f7d6de;
      --shadow:0 12px 30px rgba(0,0,0,.08);
      --radius:18px;
      --max:1100px;

      /* drawer + modal */
      --overlay: rgba(0,0,0,.45);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text)
    }
    .wrap{max-width:var(--max);margin:0 auto;padding:20px}
    header{margin-bottom:10px}
    h1{margin:0}
    .muted{color:var(--muted)}

    nav{margin-top:10px}
    nav a{
      display:inline-block;
      margin:6px 10px 0 0;
      padding:8px 14px;
      background:var(--tab-bg);
      border-radius:999px;
      text-decoration:none;
      color:var(--text);
      font-weight:650;
      transition:background .2s
    }
    nav a:hover{background:var(--accent);color:#fff}

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:18px;
      margin-top:18px
    }

    /* Make entire card clickable */
    .cardBtn{
      display:block;
      text-decoration:none;
      color:inherit;
      border:0;
      padding:0;
      background:transparent;
      cursor:pointer;
      text-align:left;
    }

    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      border:1px solid rgba(0,0,0,.06)
    }

    .imgBox{
      aspect-ratio:4/3;
      background:#f1f1f1;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden
    }

    img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block
    }

    .content{padding:16px}

    .pill{
      display:inline-block;
      font-size:12px;
      font-weight:800;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(230,166,179,.25);
      color:#6a2f3a;
      margin-bottom:10px
    }

    .price{font-weight:900;margin:10px 0 0}

    .btn{
      display:inline-block;
      margin-top:12px;
      padding:10px 16px;
      background:var(--accent);
      color:white;
      border-radius:12px;
      text-decoration:none;
      font-weight:800;
      border:0;
      cursor:pointer;
    }
    .btn:hover{background:var(--accent-hover)}

    footer{
      text-align:center;
      color:var(--muted);
      margin-top:40px;
      font-size:14px
    }

    a.igLink{
      color:var(--accent-hover);
      font-weight:900;
      text-decoration:none
    }
    a.igLink:hover{text-decoration:underline}

    @media(max-width:620px){
      nav a{padding:6px 10px}
    }

    /* =========================
       MODAL (Product Details)
    ========================== */
    .overlay{
      position:fixed;
      inset:0;
      background:var(--overlay);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:50;
    }
    .overlay.open{display:flex;}
    .modal{
      width:min(920px, 100%);
      background:var(--card);
      border-radius:22px;
      box-shadow:var(--shadow);
      overflow:hidden;
      border:1px solid rgba(0,0,0,.08);
      display:grid;
      grid-template-columns: 1.1fr .9fr;
    }
    @media(max-width:860px){
      .modal{grid-template-columns:1fr;}
    }
    .modalImg{
      min-height:280px;
      background:#f1f1f1;
    }
    .modalBody{padding:18px;}
    .modalTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .xBtn{
      border:0;
      background:rgba(0,0,0,.06);
      border-radius:12px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:900;
    }
    .xBtn:hover{background:rgba(0,0,0,.10)}
    .meta{
      margin-top:10px;
      padding:12px;
      border-radius:14px;
      background:rgba(230,166,179,.18);
      color:#5a2832;
      font-size:14px;
      line-height:1.35;
    }
    .meta strong{display:block;margin-bottom:4px}

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    .ghostBtn{
      background:transparent;
      border:1px solid rgba(0,0,0,.14);
      color:var(--text);
    }
    .ghostBtn:hover{background:rgba(0,0,0,.04)}

    /* Forms inside modal */
    .field{margin-top:10px}
    .field label{display:block;font-weight:800;margin-bottom:6px}
    .field select, .field input{width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.12)}

    /* =========================
       CART DRAWER (Right side)
    ========================== */
    .drawerOverlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.25);
      display:none;
      z-index:60;
    }
    .drawerOverlay.open{display:block}

    .drawer{
      position:fixed;
      top:0;
      right:0;
      height:100%;
      width:min(420px, 92vw);
      background:var(--card);
      box-shadow: -18px 0 50px rgba(0,0,0,.18);
      transform:translateX(110%);
      transition:transform .25s ease;
      z-index:70;
      display:flex;
      flex-direction:column;
    }
    .drawer.open{transform:translateX(0)}
    .drawerHeader{
      padding:16px;
      border-bottom:1px solid rgba(0,0,0,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .drawerBody{padding:16px; overflow:auto; flex:1;}
    .line{
      border:1px solid rgba(0,0,0,.06);
      border-radius:14px;
      padding:12px;
      margin-bottom:12px;
    }
    .row{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .small{font-size:13px;color:var(--muted)}
    .qtyBtn{
      border:1px solid rgba(0,0,0,.15);
      background:transparent;
      border-radius:10px;
      padding:6px 10px;
      cursor:pointer;
      font-weight:850;
    }
    .qtyBtn:hover{background:rgba(0,0,0,.04)}
    .drawerFooter{
      padding:16px;
      border-top:1px solid rgba(0,0,0,.08);
    }
    .totalRow{display:flex;justify-content:space-between;font-weight:900;margin-bottom:10px}
    .checkoutNote{font-size:12px;color:var(--muted);line-height:1.35;margin-top:10px}

    /* =========================
       TOAST (made-to-order message)
    ========================== */
    .toast{
      position:fixed;
      left:50%;
      transform:translateX(-50%);
      bottom:18px;
      width:min(720px, 92vw);
      background:#fff;
      border:1px solid rgba(0,0,0,.10);
      border-radius:16px;
      box-shadow:var(--shadow);
      padding:12px 14px;
      display:none;
      z-index:80;
    }
    .toast.show{display:block}
    .toast strong{display:block;margin-bottom:2px}
  </style>
</head>

<body>
<div class="wrap">

  <!-- =========================
       HEADER
  ========================== -->
  <header>
    <h1>HookedByKerrah</h1>
    <p class="muted">Handmade crochet pieces made to order ðŸ§¶âœ¨</p>

    <nav>
      <a href="#featured">Featured</a>
      <a href="#shop">Shop</a>
      <a href="#custom">Custom Request</a>
      <a href="#policies">Policies</a>
    </nav>
  </header>

  <main>

    <!-- =========================
         FEATURED
         Cards are generated from PRODUCTS below.
    ========================== -->
    <section id="featured">
      <h2>Featured Right Now</h2>
      <div class="grid" id="featuredGrid"></div>
    </section>

    <!-- =========================
         SHOP
    ========================== -->
    <section id="shop">
      <h2 style="margin-top:22px">Shop</h2>

      <h3>Wearables</h3>
      <div class="grid" id="wearablesGrid"></div>

      <h3 style="margin-top:18px">Accessories</h3>
      <div class="grid" id="accessoriesGrid"></div>

      <h3 style="margin-top:18px">Home</h3>
      <div class="grid" id="homeGrid"></div>
    </section>

    <!-- =========================
         CUSTOM REQUEST BOX
    ========================== -->
    <section id="custom" style="margin-top:28px">
      <h2>Custom Request</h2>
      <p class="muted">Want something not listed? Tell me what you have in mind.</p>

      <div class="card" style="padding:16px">
        <label for="customText" style="font-weight:850;display:block;margin-bottom:8px">
          Your request
        </label>
        <textarea id="customText" rows="5" style="width:100%;padding:12px;border-radius:14px;border:1px solid rgba(0,0,0,.14);font:inherit"></textarea>

        <button class="btn" id="customSubmit" style="margin-top:12px">Submit request</button>

        <!-- Confirmation message shows here -->
        <p class="muted" id="customMsg" style="margin-top:12px;display:none"></p>

        <p class="muted" style="margin-top:10px">
          Follow me on Instagram:
          <a class="igLink" href="https://instagram.com/HookedByKerrah" target="_blank" rel="noopener">
            @HookedByKerrah
          </a>
        </p>
      </div>
    </section>

    <!-- =========================
         POLICIES
    ========================== -->
    <section id="policies" style="margin-top:28px">
      <h2>Policies</h2>
      <p class="muted">
        All items are handmade and made to order. All sales are final.
      </p>
      <p class="muted">
        Questions? DM me on Instagram:
        <a class="igLink" href="https://instagram.com/HookedByKerrah" target="_blank" rel="noopener">
          @HookedByKerrah
        </a>
      </p>
    </section>

  </main>

  <footer>
    Â© 2026 HookedByKerrah â€¢ Handmade Crochet
  </footer>

</div>

<!-- =========================
     PRODUCT DETAILS MODAL
     (Now includes selectors for size/material/color when product provides them)
========================== -->
<div class="overlay" id="productOverlay" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-label="Product details">
    <div class="modalImg imgBox">
      <img id="modalImg" src="" alt="">
    </div>

    <div class="modalBody">
      <div class="modalTop">
        <div>
          <div class="pill" id="modalPill" style="display:none"></div>
          <h2 id="modalTitle" style="margin:0"></h2>
          <p class="muted" id="modalSubtitle" style="margin:6px 0 0"></p>
          <p class="price" id="modalPrice" style="margin-top:10px"></p>
        </div>

        <button class="xBtn" id="closeModal" aria-label="Close">âœ•</button>
      </div>

      <!-- EDIT-HERE: Product details -->
      <div class="meta" id="modalDetails"></div>

      <!-- selectors: only shown when product defines options -->
      <div id="modalOptions" style="margin-top:12px"></div>

      <div class="actions">
        <button class="btn" id="addToCartBtn">Add to cart</button>
        <button class="btn ghostBtn" id="keepShoppingBtn">Keep shopping</button>
      </div>

      <p class="small" style="margin-top:10px">
        Made to order. Allow 7+ days depending on the product. Items may ship sooner.
      </p>
    </div>
  </div>
</div>

<!-- =========================
     CART DRAWER (slides from right)
========================== -->
<div class="drawerOverlay" id="drawerOverlay"></div>

<aside class="drawer" id="cartDrawer" aria-label="Shopping cart">
  <div class="drawerHeader">
    <strong>Cart</strong>
    <button class="xBtn" id="closeCart" aria-label="Close cart">âœ•</button>
  </div>

  <div class="drawerBody" id="cartItems"></div>

  <div class="drawerFooter">
    <div class="totalRow">
      <span>Total</span>
      <span id="cartTotal">$0</span>
    </div>

    <!-- You can replace this later with a real checkout link (Shopify, Stripe, etc.) -->
    <button class="btn" id="checkoutBtn" style="width:100%">Checkout (placeholder)</button>

    <div class="checkoutNote">
      <strong>Made to order:</strong> allow 7+ days depending on the product. Items may be shipped sooner.
    </div>
  </div>
</aside>

<!-- =========================
     TOAST MESSAGE
========================== -->
<div class="toast" id="toast">
  <strong>Added to cart</strong>
  <span id="toastText">Made to order â€” allow 7+ days depending on the product. Items may ship sooner.</span>
</div>

<script>
  /* =========================================================
     EDIT PRODUCT INFO HERE (centralized)
     - Use each product object to define options + a price() function
     - price() must return a Number (dollars)
     ========================================================= */
  const PRODUCTS = [
    {
      id: "santahats",
      name: "Santa Hats",
      category: "featured", // featured, wearables, accessories, home
      pill: "Seasonal favorite",
      image: "images/SantaHats.jpeg",
      alt: "Crochet Santa hats",
      subtitle: "Pick size, color combo, and optional glitter.",
      priceLabel: "$30â€“$40",
      // OPTIONAL: options and price logic for modal
      options: {
        sizes: ["Child","Adult"],
        materials: ["Regular","Glitter"],
          colors: ["Red Hat/Black Trim","Black Hat/Red Trim"]
      },
      price(sel){
        // example: adult = 40, child = 35, baby = 30; cotton +$5
        const sizeMap = {"Child":35, "Adult":40 };
        const base = sizeMap[sel.size] || 30;
        const matAdj = (sel.material === "Cotton") ? 5 : 0;
        return base + matAdj;
      },
      //i added  this part bc if the selection is glitter, i want to charge $3 more
      price(sel){
        let base = 40;
        if(sel.material === "Glitter") base += 3;
        return base;
      },
      material: "Yarn (type varies by request).",
      uses: "Warm seasonal hat for holidays, gifts, photos, and cozy winter outfits.",
      pairing: "Pairs cute with a neutral coat, boots, and a festive scarf.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },

    {
      id: "tote",
      name: "Tote Bag",
      category: "featured",
      pill: "Featured",
      image: "images/IMG_4125.jpg",
      alt: "Crochet tote bag",
      subtitle: "A statement tote â€” choose your colorway.",
      priceLabel: "$45",
      options: {
        colors: ["Blue Multicolor"]
      },
      price(sel){
        let base = 45;
        if(sel.material === "Cotton") base += 5;
        return base;
      },
      material: "Yarn (type varies).",
      uses: "Everyday carry: books, laptop, errands, markets, travel.",
      pairing: "Elevates a simple outfit â€” jeans + tee becomes styled instantly.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },

    {
      id: "cardigan",
      name: "Hexagon Cardigan",
      category: "wearables",
      pill: "",
      image: "images/BlueHexagonCardigan.png",
      alt: "Hexagon cardigan",
      subtitle: "Choose size range, length, and color vibe.",
      priceLabel: "Starting at $90",
      options: {
        sizes: ["XS-S","M-L","XL-XXL"],
        colors: ["Black with red glitter trim"]
      },
      price(sel){
        let base = 90;
        if(sel.size === "M-L") base += 20;
        if(sel.size === "XL-XXL") base += 40;
        return base;
      },
      material: "Yarn ( varies by color).",
      uses: "Layering piece for everyday wear, dinner, travel, and cozy days.",
      pairing: "The hexagon cardigan elevates the outfit â€” wear it to business casual work over a top with trousers, or with jeans + boots for a clean look.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },
  {
      id: "cardigan",
      name: "Valentines- Hexagon Cardigan",
      category: "wearables",
      pill: "",
    // fix image later
      image: "images/BlueHexagonCardigan.png",
      alt: "Valentines- Hexagon Cardigan",
      subtitle: "Choose size range, length, and color vibe.",
      priceLabel: "Starting at $110",
      options: {
        sizes: ["XS-S","M-L","XL-XXL"],
        colors: ["Pink Ombre with white glitter"]
      },
      price(sel){
        let base = 120;
        if(sel.size === "M-L") base += 30;
        if(sel.size === "XL-XXL") base += 60;
        return base;
      },
      material: "Yarn ( all cardigans will have slight variations in color-handmade).",
      uses: "Layering piece for everyday wear, dinner, travel, and cozy days.",
      pairing: "The hexagon cardigan elevates the outfit â€” wear it to business casual work over a top with trousers, or with jeans + boots for a clean look.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },

    {
      id: "croptop",
      name: "Ribbed Lace Drawstring Crop Top",
      category: "wearables",
      pill: "Custom fit",
      image: "images/IMG_4188.jpg",
      alt: "Ribbed lace drawstring crop top",
      priceLabel: "Starting at $45",
      options: {
        sizes: ["XS","S","M","L"],
        colors: ["Coral Orange(Pictured),Blue/ White Multicolor","Black","Pink","Mustard Yellow","Royal Blue","Pink/White"]
      },
      price(sel){
        let base = 45;
        if(sel.size === "M") base += 10;
        if(sel.size === "L") base += 20;
        return base;
      },
      material: "Yarn (type varies).",
      uses: "Statement top for warm weather, brunch, concerts, layering under jackets.",
      pairing: "Pairs with high-waisted jeans, a skirt, or layered under a blazer.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },
{
      id: "croptop",
      name: "Front Tie Crop Top",
      category: "wearables",
      pill: "Custom fit",
      image: "images/FrontTie.png",
      alt: "Front Tie Crop Top",
      priceLabel: "Starting at $45",
      options: {
        sizes: ["XS","S","M","L"],
        colors: ["Mustard Yellow(Pictured),Blue/ White Multicolor","Black","Pink","Royal Blue","Pink/White"]
      },
      price(sel){
        let base = 45;
        if(sel.size === "M") base += 10;
        if(sel.size === "L") base += 20;
        return base;
      },
      material: "Yarn (type varies).",
      uses: "Statement top for warm weather, brunch, concerts, layering under jackets.",
      pairing: "Pairs with high-waisted jeans, a skirt, or layered under a blazer.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },
    {
      id: "scrunchies_diy",
      name: "Custom Scrunchie",
      category: "accessories",
      pill: "Design your own",
      image: "images/IMG_4189.jpg",
      alt: "Custom scrunchie",
      subtitle: "Pick colors and trim.",
      priceLabel: "From $10",
      options: {
        sizes: ["Single"],
        materials: ["Regular","Plush"],
        colors: ["Pink","Red","Green","Blue","White","Black","Multicolred","Purple"]
      },
      price(sel){
        return (sel.material === "Plush") ? 10 : 12;
      },
      material: "Yarn (type varies).",
      uses: "Hair accessory, wrist accessory, cute gift add-on.",
      pairing: "Matches your outfit colors â€” adds a soft handmade touch.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },

    {
      id: "scrunchies",
      name: "Premade Scrunchies",
      category: "accessories",
      pill: "",
      image: "images/9indscrunchiesreg.jpg",
      alt: "Premade scrunchies",
      subtitle: "Singles or packs. Optional trim available.",
      priceLabel: "From $10",
      options: {
        sizes: ["Single","3-Pack"],
        materials: ["Acrylic","Cotton","Plush"],
        colors: ["Pink","Red","Green","Blue","White","Black","Multicolred","Purple"]
  
      },
      price(sel){
        let base = (sel.size === "3-Pack") ? 10 * 3 : 10;
        if(sel.material !== "Plush") base += 2 * (sel.size === "3-Pack" ? 3 : 1);
        return base;
      },
      material: "Yarn (varies by scrunchie).",
      uses: "Quick grab accessory for everyday hair styling.",
      pairing: "Easy match with athleisure, casual fits, or a soft glam look.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    },

    {
      id: "pillow",
      name: "Pillow Covers (Cover Only)",
      category: "home",
      pill: "",
      image: "", // leave empty if you don't have it yet
      alt: "Pillow cover",
      subtitle: "Standard sizes + custom sizing.",
      priceLabel: "From $35",
      options: {
        sizes: ["16x16","18x18","20x20"],
        materials: ["Regular","Glitter","Plush"],
        colors: ["Red","Purple Ombre","Pink Ombre"]
      },
      price(sel){
        let base = 35;
        if(sel.size === "18x18") base += 5;
        if(sel.size === "20x20") base += 10;
        if(sel.material === "Glitter") base += 5;
        if(sel.material === "Plush") base += 5;
        return base;
      },
      material: "Yarn (type varies).",
      uses: "Home decor accent. Great for couches, beds, gifts.",
      pairing: "Pairs with neutral throws + textured blankets to make the room feel cozy.",
      madeToOrder: "Allow 7+ days depending on the product. Items may ship sooner."
    }
  ];

  /* =========================================================
     UI HELPERS
  ========================================================= */
  const $ = (sel) => document.querySelector(sel);
  const $$ = (sel) => document.querySelectorAll(sel);

  function formatMoney(n){
    return `$${Number(n).toFixed(0)}`;
  }

  /* =========================================================
     RENDER GRID
  ========================================================= */
  function createCardHtml(p){
    const pill = p.pill ? `<div class="pill">${p.pill}</div>` : "";
    const img = p.image ? `<img src="${p.image}" alt="${p.alt || p.name}">`
                        : `<div style="padding:18px;text-align:center;color:var(--muted)">Add photo</div>`;
    return `
      <button class="cardBtn" type="button" data-id="${p.id}">
        <article class="card">
          <div class="imgBox">${img}</div>
          <div class="content">
            ${pill}
            <h3>${p.name}</h3>
            <p class="muted">${p.subtitle || ""}</p>
            <p class="price">${p.priceLabel || ""}</p>
            <span class="btn" style="pointer-events:none">View details</span>
          </div>
        </article>
      </button>
    `;
  }

  function renderAllGrids(){
    const featured = document.getElementById("featuredGrid");
    const wearables = document.getElementById("wearablesGrid");
    const accessories = document.getElementById("accessoriesGrid");
    const home = document.getElementById("homeGrid");

    featured.innerHTML = PRODUCTS.filter(p => p.category === "featured").map(createCardHtml).join("");
    wearables.innerHTML = PRODUCTS.filter(p => p.category === "wearables").map(createCardHtml).join("");
    accessories.innerHTML = PRODUCTS.filter(p => p.category === "accessories").map(createCardHtml).join("");
    home.innerHTML = PRODUCTS.filter(p => p.category === "home").map(createCardHtml).join("");

    // Wire up click handlers
    $$(".cardBtn").forEach(btn => btn.addEventListener("click", () => openProduct(btn.dataset.id)));
  }

  /* =========================================================
     PRODUCT MODAL (with options and live price)
  ========================================================= */
  let activeProduct = null;
  let activeSelection = {}; // {size, material, color}

  function openProduct(id){
    const p = PRODUCTS.find(x => x.id === id);
    if(!p) return;
    activeProduct = p;

    $("#modalTitle").textContent = p.name;
    $("#modalSubtitle").textContent = p.subtitle || "";
    $("#modalPill").textContent = p.pill || "";
    if(p.pill) $("#modalPill").style.display = "inline-block"; else $("#modalPill").style.display = "none";

    // image
    if(p.image){
      $("#modalImg").src = p.image;
      $("#modalImg").alt = p.alt || p.name;
    } else {
      $("#modalImg").src = "";
      $("#modalImg").alt = "";
    }

    // details block
    $("#modalDetails").innerHTML = `
      <strong>Details</strong>
      <div><strong>Material:</strong> ${p.material || "â€”"}</div>
      <div style="margin-top:6px"><strong>Uses:</strong> ${p.uses || "â€”"}</div>
      <div style="margin-top:6px"><strong>Style pairing:</strong> ${p.pairing || "â€”"}</div>
      <div style="margin-top:6px"><strong>Made to order:</strong> ${p.madeToOrder || "Allow 7+ days depending on the product. Items may ship sooner."}</div>
    `;

    // build options UI (if product.options exists)
    const optsContainer = $("#modalOptions");
    optsContainer.innerHTML = "";
    activeSelection = {};

    if(p.options){
      // SIZE
      if(p.options.sizes && p.options.sizes.length){
        const div = document.createElement("div");
        div.className = "field";
        div.innerHTML = `<label>Size</label><select id="optSize"></select>`;
        optsContainer.appendChild(div);
        const sel = div.querySelector("select");
        p.options.sizes.forEach(s => sel.add(new Option(s,s)));
        sel.addEventListener("change", () => { activeSelection.size = sel.value; updateModalPrice(); });
        sel.value = p.options.sizes[0];
        activeSelection.size = sel.value;
      }

      // MATERIAL
      if(p.options.materials && p.options.materials.length){
        const div = document.createElement("div");
        div.className = "field";
        div.innerHTML = `<label>Material</label><select id="optMaterial"></select>`;
        optsContainer.appendChild(div);
        const sel = div.querySelector("select");
        p.options.materials.forEach(m => sel.add(new Option(m,m)));
        sel.addEventListener("change", () => { activeSelection.material = sel.value; updateModalPrice(); });
        sel.value = p.options.materials[0];
        activeSelection.material = sel.value;
      }

      // COLOR
      if(p.options.colors && p.options.colors.length){
        const div = document.createElement("div");
        div.className = "field";
        div.innerHTML = `<label>Color</label><select id="optColor"></select>`;
        optsContainer.appendChild(div);
        const sel = div.querySelector("select");
        p.options.colors.forEach(c => sel.add(new Option(c,c)));
        sel.addEventListener("change", () => { activeSelection.color = sel.value; updateModalPrice(); });
        sel.value = p.options.colors[0];
        activeSelection.color = sel.value;
      }
    }

    updateModalPrice();
    $("#productOverlay").classList.add("open");
    $("#productOverlay").setAttribute("aria-hidden","false");
  }

  function updateModalPrice(){
    if(!activeProduct) return;
    let priceVal = 0;
    try {
      if(typeof activeProduct.price === "function"){
        priceVal = activeProduct.price(activeSelection);
      } else {
        // fallback: try to read from priceLabel e.g. "$45" or "Starting at $120"
        const m = (activeProduct.priceLabel || "").match(/\$([\d]+)/);
        priceVal = m ? Number(m[1]) : 0;
      }
    } catch (e) {
      priceVal = 0;
    }
    $("#modalPrice").textContent = priceVal ? formatMoney(priceVal) : (activeProduct.priceLabel || "");
  }

  function closeProduct(){
    $("#productOverlay").classList.remove("open");
    $("#productOverlay").setAttribute("aria-hidden","true");
    activeProduct = null;
    activeSelection = {};
  }

  $("#closeModal").addEventListener("click", closeProduct);
  $("#keepShoppingBtn").addEventListener("click", closeProduct);

  // click outside modal closes
  $("#productOverlay").addEventListener("click", (e) => {
    if(e.target.id === "productOverlay") closeProduct();
  });

  // ESC closes modal + cart
  document.addEventListener("keydown", (e) => {
    if(e.key === "Escape"){
      closeProduct();
      closeCart();
    }
  });

  /* =========================================================
     CART (stored in localStorage)
     Each cart item now stores:
       { uid, id, name, options:{size,material,color}, unitPrice, qty }
     uid is unique per cart line (id + options JSON) so different option combos are separate lines
  ========================================================= */
  const CART_KEY = "hbk_cart_v2";
  let cart = JSON.parse(localStorage.getItem(CART_KEY) || "[]");

  function saveCart(){ localStorage.setItem(CART_KEY, JSON.stringify(cart)); }

  function genUID(id, opts){
    return id + "::" + JSON.stringify(opts || {});
  }

  function addToCart(product, selection){
    const uid = genUID(product.id, selection);
    const found = cart.find(i => i.uid === uid);
    const unitPrice = (typeof product.price === "function") ? product.price(selection) : (Number((product.priceLabel||"").match(/\$([\d]+)/)?.[1]) || 0);

    if(found){
      found.qty += 1;
    } else {
      cart.push({
        uid,
        id: product.id,
        name: product.name,
        options: selection,
        unitPrice: Number(unitPrice),
        qty: 1
      });
    }
    saveCart();
    renderCart();

    // show made-to-order message
    showToast("Made to order â€” allow 7+ days depending on the product. Items may ship sooner.");

    // open cart drawer so it "pops up on the side"
    openCart();
  }

  function changeQty(uid, delta){
    const item = cart.find(i => i.uid === uid);
    if(!item) return;
    item.qty += delta;
    if(item.qty <= 0) cart = cart.filter(i => i.uid !== uid);
    saveCart();
    renderCart();
  }

  function cartTotal(){
    return cart.reduce((sum, i) => sum + (i.unitPrice * i.qty), 0);
  }

  function renderCart(){
    const el = $("#cartItems");

    if(cart.length === 0){
      el.innerHTML = `<p class="muted">Your cart is empty.</p>`;
      $("#cartTotal").textContent = "$0";
      return;
    }

    el.innerHTML = cart.map(i => {
      // display options
      const opts = i.options ? Object.entries(i.options).map(([k,v]) => `<div class="small"><strong>${k}:</strong> ${v}</div>`).join("") : "";
      return `
      <div class="line">
        <div style="display:flex;gap:10px;align-items:flex-start;justify-content:space-between">
          <div>
            <strong>${i.name}</strong>
            ${opts}
          </div>
          <div style="text-align:right">
            <div style="font-weight:900">${formatMoney(i.unitPrice * i.qty)}</div>
            <div class="small">Qty: ${i.qty}</div>
          </div>
        </div>

        <div style="display:flex;gap:8px;margin-top:10px">
          <button class="qtyBtn" type="button" data-act="dec" data-uid="${i.uid}">âˆ’</button>
          <button class="qtyBtn" type="button" data-act="inc" data-uid="${i.uid}">+</button>
        </div>
      </div>
    `;
    }).join("");

    $("#cartTotal").textContent = `${formatMoney(cartTotal())}`;

    // wire qty buttons
    el.querySelectorAll("button[data-act]").forEach(btn => {
      btn.addEventListener("click", () => {
        const uid = btn.dataset.uid;
        const act = btn.dataset.act;
        changeQty(uid, act === "inc" ? 1 : -1);
      });
    });
  }

  /* =========================================================
     CART DRAWER open/close
  ========================================================= */
  function openCart(){
    $("#drawerOverlay").classList.add("open");
    $("#cartDrawer").classList.add("open");
  }
  function closeCart(){
    $("#drawerOverlay").classList.remove("open");
    $("#cartDrawer").classList.remove("open");
  }
  $("#closeCart").addEventListener("click", closeCart);
  $("#drawerOverlay").addEventListener("click", closeCart);

  /* =========================================================
     TOAST
  ========================================================= */
  let toastTimer = null;
  function showToast(msg){
    $("#toastText").textContent = msg;
    $("#toast").classList.add("show");
    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => $("#toast").classList.remove("show"), 3200);
  }

  /* =========================================================
     Add to cart button inside modal:
     - ensure we capture the selected options (activeSelection)
     - if product has no options, add with empty selection
  ========================================================= */
  $("#addToCartBtn").addEventListener("click", () => {
    if(!activeProduct) return;

    // gather current selection (if any inputs were created)
    const sel = {};
    const sizeEl = document.getElementById("optSize");
    const matEl  = document.getElementById("optMaterial");
    const colEl  = document.getElementById("optColor");
    if(sizeEl) sel.size = sizeEl.value;
    if(matEl) sel.material = matEl.value;
    if(colEl) sel.color = colEl.value;

    addToCart(activeProduct, sel);
    closeProduct(); // close modal so cart drawer becomes the focus
  });

  /* =========================================================
     CUSTOM REQUEST submit
  ========================================================= */
  $("#customSubmit").addEventListener("click", () => {
    const text = $("#customText").value.trim();
    const msg = $("#customMsg");

    if(!text){
      msg.style.display = "block";
      msg.textContent = "Please type your request first.";
      return;
    }

    // Simple â€œfrontend-onlyâ€ submission:
    // If you want to actually receive messages, we can connect this to Formspree/Netlify later.
    $("#customText").value = "";
    msg.style.display = "block";
    msg.textContent = "Thank you â€” submission received! Iâ€™ll get back to you soon. Thank you for the inquiry. Follow me on IG: @HookedByKerrah";
  });

  /* =========================================================
     INIT: render everything and cart
  ========================================================= */
  renderAllGrids();
  renderCart();

  // OPTIONAL: placeholder checkout button
  $("#checkoutBtn").addEventListener("click", () => {
    alert("Checkout is a placeholder. If you want real checkout, tell me what you want to use (Shopify / Stripe Payment Link / Etsy / DM checkout).");
  });

  // close modal/drawer on navigation if desired (small UX polish)
  window.addEventListener("popstate", () => { closeProduct(); closeCart(); });
</script>

</body>
</html>
